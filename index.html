<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>Daily Habit Tracker with Theme Toggle</title>
      <style>
         * { margin: 0; padding: 0; box-sizing: border-box; }
         body {
         font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
         min-height: 100vh;
         padding: 20px;
         transition: background 0.5s, color 0.5s;
         position: relative;
         overflow-x: hidden;
         }
         /* Background Layers */
         .stars, .clouds {
         position: fixed;
         top: 0; left: 0;
         width: 100%; height: 100%;
         pointer-events: none;
         overflow: hidden;
         z-index: 0;
         }
         /* Stars */
         .star {
         position: absolute;
         width: 2px; height: 2px;
         background: white;
         border-radius: 50%;
         animation: twinkle 2s infinite alternate;
         }
         @keyframes twinkle {
         from { opacity: 0.2; }
         to { opacity: 1; }
         }
         /* Clouds */
         .cloud {
         position: absolute;
         background: #fff;
         background: rgba(255,255,255,0.9);
         border-radius: 50%;
         animation: float 60s linear infinite;
         }
         @keyframes float {
         from { transform: translateX(-200px); }
         to { transform: translateX(100vw); }
         }
         .cloud::before, .cloud::after {
         content: '';
         position: absolute;
         background: inherit;
         border-radius: 50%;
         }
         .cloud::before {
         width: 100%; height: 100%;
         top: -20px; left: 20px;
         }
         .cloud::after {
         width: 60%; height: 60%;
         top: 10px; left: -30px;
         }
         /* Content container */
         .container {
         position: relative;
         z-index: 1;
         max-width: 600px;
         margin: 0 auto;
         padding: 20px;
         }
         .header { text-align: center; margin-bottom: 40px; }
         .header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 8px; }
         .header p { font-size: 1.1rem; }
         .theme-toggle {
         position: absolute;
         top: 20px;
         right: 20px;
         width: 60px;
         height: 60px;
         border: none;
         border-radius: 50%;
         cursor: pointer;
         z-index: 2;
         transition: all 0.5s ease;
         overflow: hidden;
         }
         .theme-toggle:hover {
         transform: scale(1.1);
         }
         /* Sun Design */
         .sun {
         width: 100%;
         height: 100%;
         border-radius: 50%;
         background: radial-gradient(circle at 30% 30%, #fff9c4, #ffeb3b 40%, #ff9800 70%, #f57c00);
         position: relative;
         box-shadow: 0 0 30px rgba(255, 193, 7, 0.8), 0 0 60px rgba(255, 193, 7, 0.4);
         }
         .sun::before {
         content: '';
         position: absolute;
         top: 15%;
         left: 25%;
         width: 8px;
         height: 8px;
         border-radius: 50%;
         background: rgba(255, 255, 255, 0.8);
         box-shadow: 
         12px 5px 0 -2px rgba(255, 255, 255, 0.6),
         8px 15px 0 -3px rgba(255, 255, 255, 0.4);
         }
         .sun::after {
         content: '';
         position: absolute;
         top: -10px;
         left: -10px;
         right: -10px;
         bottom: -10px;
         border-radius: 50%;
         background: conic-gradient(
         transparent 0deg,
         rgba(255, 193, 7, 0.3) 20deg,
         transparent 40deg,
         rgba(255, 193, 7, 0.3) 60deg,
         transparent 80deg,
         rgba(255, 193, 7, 0.3) 100deg,
         transparent 120deg,
         rgba(255, 193, 7, 0.3) 140deg,
         transparent 160deg,
         rgba(255, 193, 7, 0.3) 180deg,
         transparent 200deg,
         rgba(255, 193, 7, 0.3) 220deg,
         transparent 240deg,
         rgba(255, 193, 7, 0.3) 260deg,
         transparent 280deg,
         rgba(255, 193, 7, 0.3) 300deg,
         transparent 320deg,
         rgba(255, 193, 7, 0.3) 340deg,
         transparent 360deg
         );
         animation: rotate 20s linear infinite;
         z-index: -1;
         }
         /* Moon Design */
         .moon {
         width: 100%;
         height: 100%;
         border-radius: 50%;
         background: radial-gradient(circle at 35% 25%, #f5f5f5, #e8e8e8 40%, #d0d0d0 70%, #b8b8b8);
         position: relative;
         box-shadow: 0 0 20px rgba(245, 245, 245, 0.6), inset -8px -8px 0 rgba(180, 180, 180, 0.3);
         }
         .moon::before {
         content: '';
         position: absolute;
         top: 20%;
         left: 30%;
         width: 6px;
         height: 6px;
         border-radius: 50%;
         background: rgba(160, 160, 160, 0.6);
         box-shadow: 
         15px 8px 0 -1px rgba(160, 160, 160, 0.4),
         8px 20px 0 -2px rgba(160, 160, 160, 0.5),
         25px 25px 0 -3px rgba(160, 160, 160, 0.3);
         }
         .moon::after {
         content: '';
         position: absolute;
         top: 10%;
         right: 15%;
         width: 4px;
         height: 4px;
         border-radius: 50%;
         background: rgba(160, 160, 160, 0.4);
         box-shadow: 
         -10px 15px 0 1px rgba(160, 160, 160, 0.3),
         -5px 25px 0 -1px rgba(160, 160, 160, 0.2);
         }
         @keyframes rotate {
         from { transform: rotate(0deg); }
         to { transform: rotate(360deg); }
         }
         /* Light Theme */
         body.light { background: linear-gradient(to top, #87ceeb, #fdfdfd); color: #222; }
         body.light .theme-toggle { background: transparent; }
         body.light .sun { display: block; }
         body.light .moon { display: none; }
         body.light .header h1 { color: #333; }
         body.light .header p { color: #555; }
         body.light .date-display,
         body.light .add-habit input,
         body.light .habit-item,
         body.light .modal { background: #ffffff; border: 1px solid #ccc; color: #222; }
         body.light .progress-bar { background: #ddd; }
         body.light .progress-fill { background: linear-gradient(90deg, #fbbf24, #f59e0b); }
         body.light .habit-item.completed { background: #e6ffe6; border-color: #22c55e; }
         body.light .stars { display: none; }
         body.light .clouds { display: block; }
         /* Dark Theme */
         body.dark { background: linear-gradient(to top, #0f0f0f, #1a1a2e); color: #e5e5e5; }
         body.dark .theme-toggle { background: transparent; }
         body.dark .sun { display: none; }
         body.dark .moon { display: block; }
         body.dark .header h1 { color: #fff; }
         body.dark .header p { color: #a3a3a3; }
         body.dark .date-display,
         body.dark .add-habit input,
         body.dark .habit-item,
         body.dark .modal { background: #1a1a1a; border: 1px solid #333; color: #e5e5e5; }
         body.dark .progress-bar { background: #333; }
         body.dark .progress-fill { background: linear-gradient(90deg, #60a5fa, #3b82f6); }
         body.dark .habit-item.completed { background: #0f2a1a; border-color: #22c55e; }
         body.dark .clouds { display: none; }
         body.dark .stars { display: block; }
         /* Components reused */
         .date-display { border-radius: 12px; padding: 16px; text-align: center; margin-bottom: 30px; }
         .date-display h2 { font-size: 1.2rem; font-weight: 600; }
         .add-habit { display: flex; gap: 12px; margin-bottom: 30px; }
         .add-habit input { flex: 1; padding: 12px 16px; border-radius: 8px; font-size: 1rem; border: 1px solid; }
         .add-btn { padding: 12px 24px; background: #60a5fa; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
         .add-btn:hover { background: #3b82f6; }
         .progress-section { margin-bottom: 30px; }
         .progress-bar { width: 100%; height: 8px; border-radius: 4px; overflow: hidden; margin-bottom: 8px; }
         .progress-fill { height: 100%; transition: width 0.3s ease; width: 0%; }
         .progress-text { text-align: center; font-size: 0.9rem; }
         .reset-btn { margin-top: 12px; padding: 10px 20px; background: #333; color: #e5e5e5; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; width: 100%; }
         .reset-btn:hover { background: #444; }
         .habit-item { display: flex; align-items: center; gap: 12px; padding: 16px; border-radius: 8px; margin-bottom: 12px; transition: all 0.2s; }
         .habit-checkbox { width: 20px; height: 20px; border: 2px solid #666; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
         .habit-checkbox.checked { background: #22c55e; border-color: #22c55e; }
         .habit-checkbox.checked::after { content: '✓'; color: white; font-weight: bold; font-size: 14px; }
         .habit-text { flex: 1; font-size: 1rem; }
         .habit-item.completed .habit-text { text-decoration: line-through; opacity: 0.7; }
         .delete-btn { background: none; border: none; color: #ef4444; cursor: pointer; padding: 4px; border-radius: 4px; transition: background-color 0.2s; }
         .delete-btn:hover { background: #2a1a1a; }
         .empty-state { text-align: center; padding: 40px 20px; }
         .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
         .modal-overlay.show { opacity: 1; visibility: visible; }
         .modal { border-radius: 12px; padding: 24px; max-width: 400px; width: 90%; transform: scale(0.9); transition: transform 0.3s ease; }
         .modal-overlay.show .modal { transform: scale(1); }
         .modal h3 { font-size: 1.2rem; margin-bottom: 16px; text-align: center; }
         .modal-buttons { display: flex; gap: 12px; justify-content: center; }
         .modal-btn { padding: 10px 20px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.2s; min-width: 80px; }
         .modal-btn.cancel { background: #333; color: #e5e5e5; }
         .modal-btn.confirm { background: #ef4444; color: white; }
      </style>
   </head>
   <body class="dark">
      <!-- Background Elements -->
      <div class="stars" id="stars"></div>
      <div class="clouds" id="clouds"></div>
      <button class="theme-toggle" onclick="toggleTheme()" id="theme-toggle">
         <div class="sun"></div>
         <div class="moon"></div>
      </button>
      <div class="container">
         <div class="header">
            <h1>Curtain - Complete your daily habits</h1>
            <p>Build better habits, one day at a time</p>
         </div>
         <div class="date-display">
            <h2 id="current-date"></h2>
         </div>
         <div class="add-habit">
            <input type="text" id="habit-input" placeholder="Add a new habit" maxlength="100">
            <button class="add-btn" onclick="addHabit()">Add Habit</button>
         </div>
         <div class="progress-section">
            <div class="progress-bar">
               <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text" id="progress-text">0 of 0 habits completed</div>
            <button class="reset-btn" onclick="resetCompleted()">Reset Completed</button>
         </div>
         <div class="habits-list" id="habits-list">
            <div class="empty-state">
               <h3>No habits yet</h3>
               <p>Add your first habit above to get started!</p>
            </div>
         </div>
      </div>
      <!-- Delete Modal -->
      <div class="modal-overlay" id="delete-modal">
         <div class="modal">
            <h3>Are you sure you want to delete this habit?</h3>
            <div class="modal-buttons">
               <button class="modal-btn cancel" onclick="hideDeleteModal()">Cancel</button>
               <button class="modal-btn confirm" onclick="confirmDelete()">OK</button>
            </div>
         </div>
      </div>
      <script>
         let habits = [];
         let habitToDelete = null;
         
         function init() {
           displayCurrentDate();
           loadHabits();
           renderHabits();
           updateProgress();
           generateStars();
           generateClouds();
         }
         
         function displayCurrentDate() {
           const today = new Date();
           const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
           document.getElementById('current-date').textContent = today.toLocaleDateString('en-US', options);
         }
         
         function loadHabits() {
           const today = new Date().toDateString();
           const savedData = localStorage.getItem('habitTracker');
           if (savedData) {
             const data = JSON.parse(savedData);
             if (data.date !== today) {
               habits = data.habits.map(habit => ({ ...habit, completed: false }));
               saveHabits();
             } else {
               habits = data.habits || [];
             }
           }
         }
         
         function saveHabits() {
           const today = new Date().toDateString();
           localStorage.setItem('habitTracker', JSON.stringify({ date: today, habits }));
         }
         
         function addHabit() {
           const input = document.getElementById('habit-input');
           const habitText = input.value.trim();
           if (!habitText) return alert('Please enter a habit!');
           if (habits.some(h => h.text.toLowerCase() === habitText.toLowerCase())) return alert('This habit already exists!');
           habits.push({ id: Date.now(), text: habitText, completed: false });
           input.value = '';
           saveHabits(); renderHabits(); updateProgress();
         }
         
         function toggleHabit(id) {
           habits = habits.map(h => h.id === id ? { ...h, completed: !h.completed } : h);
           saveHabits(); renderHabits(); updateProgress();
         }
         
         function deleteHabit(id) { habitToDelete = id; showDeleteModal(); }
         function showDeleteModal() { document.getElementById('delete-modal').classList.add('show'); }
         function hideDeleteModal() { document.getElementById('delete-modal').classList.remove('show'); habitToDelete = null; }
         function confirmDelete() {
           if (habitToDelete !== null) {
             habits = habits.filter(h => h.id !== habitToDelete);
             saveHabits(); renderHabits(); updateProgress();
           }
           hideDeleteModal();
         }
         
         function renderHabits() {
           const list = document.getElementById('habits-list');
           if (habits.length === 0) {
             list.innerHTML = `<div class="empty-state"><h3>No habits yet</h3><p>Add your first habit above to get started!</p></div>`;
             return;
           }
           list.innerHTML = habits.map(habit => `
             <div class="habit-item ${habit.completed ? 'completed' : ''}">
               <div class="habit-checkbox ${habit.completed ? 'checked' : ''}" onclick="toggleHabit(${habit.id})"></div>
               <span class="habit-text">${habit.text}</span>
               <button class="delete-btn" onclick="deleteHabit(${habit.id})">×</button>
             </div>
           `).join('');
         }
         
         function updateProgress() {
           const total = habits.length;
           const done = habits.filter(h => h.completed).length;
           const percent = total > 0 ? (done / total) * 100 : 0;
           document.getElementById('progress-fill').style.width = `${percent}%`;
           document.getElementById('progress-text').textContent = `${done} of ${total} habits completed`;
         }
         
         function resetCompleted() {
           habits = habits.map(h => ({ ...h, completed: false }));
           saveHabits(); renderHabits(); updateProgress();
         }
         
         // Theme toggle
         function toggleTheme() {
           const body = document.body;
           
           if (body.classList.contains('dark')) {
             body.classList.remove('dark'); 
             body.classList.add('light');
           } else {
             body.classList.remove('light'); 
             body.classList.add('dark');
           }
         }
         
         // Generate stars
         function generateStars() {
           const starsContainer = document.getElementById('stars');
           for (let i = 0; i < 100; i++) {
             const star = document.createElement('div');
             star.className = 'star';
             star.style.top = Math.random() * 100 + 'vh';
             star.style.left = Math.random() * 100 + 'vw';
             star.style.animationDuration = (1 + Math.random() * 2) + 's';
             starsContainer.appendChild(star);
           }
         }
         
         // Generate clouds
         function generateClouds() {
           const cloudsContainer = document.getElementById('clouds');
           for (let i = 0; i < 5; i++) {
             const cloud = document.createElement('div');
             cloud.className = 'cloud';
             const size = 80 + Math.random() * 100;
             cloud.style.width = size + 'px';
             cloud.style.height = size * 0.6 + 'px';
             cloud.style.top = Math.random() * 50 + 'vh';
             cloud.style.animationDuration = (40 + Math.random() * 40) + 's';
             cloudsContainer.appendChild(cloud);
           }
         }
         
         document.getElementById('habit-input').addEventListener('keypress', e => { if (e.key === 'Enter') addHabit(); });
         document.addEventListener('DOMContentLoaded', init);
         document.getElementById('delete-modal').addEventListener('click', e => { if (e.target === e.currentTarget) hideDeleteModal(); });
      </script>
   </body>
</html>
